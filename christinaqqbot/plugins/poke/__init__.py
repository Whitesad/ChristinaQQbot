from nonebot import on_notice
from nonebot.rule import to_me
from nonebot.adapters.cqhttp import Bot,Event,MessageSegment

from christinaqqbot.utils.reply import *

import os
import platform

# æˆ³ ä¸€ æˆ³

poke_reply=[
        "lspä½ å†æˆ³ï¼Ÿ","è¿žä¸ªbotéƒ½è¦æˆ³çš„è‚¥å®…çœŸæ¶å¿ƒå•Šã€‚",
        "ä½ å†æˆ³ï¼", "ï¼Ÿå†æˆ³è¯•è¯•ï¼Ÿ", "åˆ«æˆ³äº†åˆ«æˆ³äº†å†æˆ³å°±åäº†555", "æˆ‘çˆªå·´çˆªå·´ï¼Œçƒçƒåˆ«å†æˆ³äº†", "ä½ æˆ³ä½ ðŸŽå‘¢ï¼Ÿï¼",
        "é‚£...é‚£é‡Œ...é‚£é‡Œä¸èƒ½æˆ³...ç»å¯¹...", "(ã€‚Â´ãƒ»Ï‰ãƒ»)ã‚“?", "æœ‰äº‹æå«æˆ‘ï¼Œåˆ«å¤©å¤©ä¸€ä¸ªåŠ²æˆ³æˆ³æˆ³ï¼", "æ¬¸å¾ˆçƒ¦æ¬¸ï¼ä½ æˆ³ðŸ”¨å‘¢",
        "?","å†æˆ³ä¸€ä¸‹è¯•è¯•ï¼Ÿ","???","æ­£åœ¨å…³é—­å¯¹æ‚¨çš„æ‰€æœ‰æœåŠ¡...å…³é—­æˆåŠŸ","å•Šå‘œï¼Œåˆšåˆšç«Ÿç„¶ç¡ç€äº†ã€‚ä»€ä¹ˆäº‹ï¼Ÿ","æ­£åœ¨å®šä½æ‚¨çš„çœŸå®žåœ°å€ã€‚ã€‚ã€‚\r\nå®šä½æˆåŠŸã€‚è½°ç‚¸æœºå·²èµ·é£ž"
]

reply=[
    'æ—¶é—´ä¼šéšç€äººçš„æ„Ÿè§‰è€Œå˜é•¿æˆ–å˜çŸ­ï¼Œç›¸å¯¹è®ºçœŸæ˜¯æ—¢æµªæ¼«åˆä¼¤æ„Ÿçš„ä¸œè¥¿å‘¢ã€‚',
    'æˆ‘ç»å¸¸ä¼šæƒ³ï¼Œå¯¹äºŽå†ˆéƒ¨æ¥è¯´çœŸç”±ç†æ˜¯ä¸€ä¸ªå¤šä¹ˆä¸å¯æˆ–ç¼ºçš„å­˜åœ¨\r\nä¸€ä¸ªäººåŽŸæ¥å¯ä»¥å¯¹å¦ä¸€ä¸ªäººå¦‚æ­¤çè§†',
    'ç»“æžœæˆ‘å’Œä½ çš„åŒºåˆ«å¯èƒ½å°±æ˜¯ï¼Œä½ æ˜¯A prioriçš„å­˜åœ¨ï¼Œè€Œæˆ‘æ˜¯A posterioriçš„å­˜åœ¨å§ã€‚',
    'å°±ç®—ä¸èƒ½æ€»æƒ³èµ·æ¥ä¹Ÿå¥½ï¼Œå°±ç®—100æ¬¡é‡Œåªæœ‰1æ¬¡ä¹Ÿç½¢ï¼Œå¸Œæœ›ä½ èƒ½æƒ³èµ·æˆ‘ï¼Œå› ä¸ºé‚£é‡Œæœ‰ç€æˆ‘ï¼Œ1ï¼…çš„å¢™å£çš„å¯¹é¢ï¼Œæˆ‘ä¸€å®šå­˜åœ¨ç€ï¼å†ˆéƒ¨â€¦å†ˆéƒ¨â€¦å†ˆéƒ¨â€¦',
    'El Psy Congroo',
    'è¿™ä¸€åˆ‡éƒ½æ˜¯å‘½è¿çŸ³ä¹‹é—¨çš„é€‰æ‹©ï¼',
    'è¢«è¿‡åŽ»å›šç¦ï¼Œå¯¹æœªæ¥å¹æ¯ã€‚',
    'ä¸è¦æƒ³ä¸€å‘³çš„æ”¹å˜çŽ°åœ¨ï¼Œè¿™åªä¼šè®©è¿‡åŽ»å˜å¾—é¢ç›®å…¨éžç½¢äº†ã€‚',
    'è¿‡åŽ»åœ¨è¿œç¦»ï¼Œæœªæ¥æ˜¯å¦æ„å‘³ç€æ­£åœ¨é è¿‘ã€‚',
    'å‘ï¼Œå†ˆéƒ¨....',
    'è°è¦åƒå˜æ€çš„é¦™è•‰å•Šï¼',
    'æˆ‘ä¸æ˜¯åŠ©æ‰‹',
    'è¯´äº†å¤šå°‘éäº†,æˆ‘ä¸æ˜¯åŠ©æ‰‹ï¼ï¼',
    'çœ¼ç›â€¦å¿«é—­ä¸Šâ€¦',
    'æ‰ä¸æ˜¯å…‹é‡Œæ–¯è’‚å¨œï¼',
    'ä½ è¿™ä¸ªhentaiç»…å£«',
    'æ‰ä¸æ˜¯å…³å¿ƒä½ å‘¢ï¼',
    'ä¸è¦åŠ è’‚å¨œ!!!',
    'ç™½ç—´å—ä½ ï¼Œæƒ³æ­»å—ä½ ?',
    'æŠ±æŠ±â€¦',
    'åœ¨ç™¾åˆ†ä¹‹ä¸€çš„å¢™çš„å¯¹é¢ï¼Œæˆ‘ä¸€å®šå­˜åœ¨ç€.',
    'åœ¨æ— æ•°æ¡ä¸–ç•Œçº¿ä¸­ï¼Œè¯´ä¸å®šä¼šå­˜åœ¨å…¶ä»–çš„ã€Œæˆ‘ã€ï¼Œæ— æ•°çš„ã€Œæˆ‘ã€å¿ƒæ„ç›¸é€šï¼Œå…¶ä¸­è¯´ä¸å®šå°±åŒ…å«ç€æˆ‘ã€‚',
    'å°±ç®—æ€å¿µèƒ½è¶…è¶Šä¸–ç•Œçº¿ï¼ŒçŽ°å®žçš„æ”¶æŸä¾æ—§æ— æƒ…',
    'å°±ç®—ä¸èƒ½æ€»æƒ³èµ·æ¥ä¹Ÿå¥½ï¼Œå°±ç®—100æ¬¡é‡Œåªæœ‰1æ¬¡ä¹Ÿç½¢ï¼Œå¸Œæœ›ä½ èƒ½æƒ³èµ·æˆ‘ï¼Œå› ä¸ºé‚£é‡Œæœ‰ç€æˆ‘ï¼Œ1ï¼…çš„å¢™å£çš„å¯¹é¢ï¼Œæˆ‘ä¸€å®šå­˜åœ¨ç€ï¼å†ˆéƒ¨â€¦å†ˆéƒ¨â€¦å†ˆéƒ¨â€¦',
]

poke = on_notice()
@poke.handle()
async def _poke(bot: Bot, event: Event, state: dict) -> None:
    if(event.detail_type=='notify'and event.raw_event['target_id']==event.raw_event['self_id']):
        files=os.listdir('./voice')
        voice_name=get_random_reply(files)

        sys = platform.system()
        if sys == "Windows":
            voice_file=os.getcwd()+'\\voice\\'+voice_name
        elif sys == "Linux":
            voice_file=os.getcwd()+'/voice/'+voice_name
        voice_reply=MessageSegment.record(file='file:///'+voice_file)

        text=voice_name.split('_')[2]

        # test_file='file:///D:\\Projects\\QQbot\\ChristinaQQbot\\voice\\t.amr'
        # test_reply=MessageSegment.record(file=test_file,magic=0)
        # await bot.send_msg(group_id=event.group_id,message=test_reply)

        await bot.send_msg(group_id=event.group_id,message=voice_reply)
        await bot.send_msg(group_id=event.group_id,message=text)